# 정규표현식
#[문제] 정규표현식을 사용하여 아래에 제시된 문자열을 추출하라.
#제시된 예시를 백터에 넣어서 여러 샘플을 처리하라.
#[1문제]
#문자열에서 정규표현식을 사용하여 전화번호를 추출하라.
#국번은 2,3자리, 중간번호 3,4자리, 끝번호는 4자리
# 예시: "02-123-1234", "02-1234-1234", "031-1234-5678"
# 정답
tels <- c("02-123-1234", "02-1234-1234", "031-1234-5678", "010-12345-1234")

for (tel in tels) {
  x <- str_extract(tel, "[0-9]{2,3}-[0-9]{3,4}-[0-9]{4}")
  cat(tel, ':', x, '\n')
}

# 02-123-1234 : 02-123-1234 
# 02-1234-1234 : 02-1234-1234 
# 031-1234-5678 : 031-1234-5678 
# 010-12345-1234 : NA 

tel
pn <- c("070-245-4156", "02-123-1234", "02-1234-1234")

str_extract(pn,"[0-9]{2,}-[0-9]{3,}-[0-9]{4}")
 # [1] "070-245-4156" "02-123-1234"  "02-1234-1234"

# or [하나씩 처리할 때]
str_extract(pn,"[0-9]{3}-[0-9]{3}-[0-9]{3,}")
# "070-245-4156"
pn1 <- "02-1234-1234"
str_extract(pn1,"[0-9]{2}-[0-9]{2,}-[0-9]{2,}")
# "02-1234-1234"
pn2 <- "02-123-1234"
str_extract(pn2,"[0-9]{2}-[0-9]{2,}-[0-9]{2,}")
# "02-123-1234"


#[문제2]
# 문자열에서 정규표현식을 사용하여 주민번호를 추출하라.
# 주민번호:
# -첫번쨰 숫자는 6자리
# -두번째 숫자는 7자리
# -두번쨰 숫자의 첫자리 1-4
# 예시: "990131-1234567", "990131-2234567", "990131-3234567", "990131-4243567"

# 정답
regs <- c("990131-1234567", "990131-2234567", "990131-3234567", "990131-4243567")
for(reg in regs){
  r <- str_extract(reg,"[0-9]{6}-[1-4][0-9]{6}")
  cat(reg,':', r, '\n')
}

# 990131-1234567 : 990131-1234567 
# 990131-2234567 : 990131-2234567 
# 990131-3234567 : 990131-3234567 
# 990131-4243567 : 990131-4243567
  str_extract(string, pattern, group = NULL)
s <- c("020313-1123456", "020313-2123456", "020313-3123456", "020313-4123456")

str_extract_all(s,"[0-9]{6}-[0-9]{7}")

# [[1]]
# [1] "020313-1123456"
# 
# [[2]]
# [1] "020313-2123456"
# 
# [[3]]
# [1] "020313-3123456"
# 
# [[4]]
# [1] "020313-4123456"
# 

# [문제3]
# 2000년생 이전생 두번째 숫자의 첫자리 1,2
# 2000년생 이전생 두번째 숫자의 첫자리 3,4
regs <- c("990131-1234567", "990131-2234567", "990131-3234567", "990131-4243567")
          
for(reg in regs) {
  r1 <- str_extract(reg,"[0-9][0-9]{5}--[12][0-9]{6}")
  r2 <- str_extract(reg,"[0-9][0-9]{5}--[34][0-9]{6}")
  cat(reg,':', r1, ',' ,r2 , '\n')
}
 



